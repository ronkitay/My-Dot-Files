# Jar Inspection Commands
#A# look4j;Looks for classes in JAR files
function look4j() { JAR_COMMAND="jar"; jar > /dev/null 2>&1 ; [[ $? == 127 ]] && { [[ -z ${JAVA_HOME} ]] && printf "$(tput bold)$(tput setaf 1)The 'jar' command is not in the PATH and JAVA_HOME is not configured - aborting$(tput sgr0)\n" && return 2; JAR_COMMAND=${JAVA_HOME}/bin/jar; }; [[ $# == 0 ]] || [[ $# > 2 ]] && printf "$(tput bold)$(tput setaf 1)Usage:$(tput sgr0) $(tput bold) look4j [<dir>] <pattern>$(tput sgr0)\n$(tput bold)$(tput setaf 2)Examples:$(tput sgr0)\n\t$(tput bold)look4j Exception$(tput sgr0)\n\t$(tput bold)look4j \$JAVA_HOME/lib com/sun/.*action$(tput sgr0)\n" && return 1; [[ $# == 2 ]] && { DIR=$1 ; CLASS=$2; }; [[ $# == 1 ]] && { DIR="." ; CLASS=$1; }; for jar in `find $DIR -name "*.jar"`; do printf "."; res=$(${JAR_COMMAND} tvf $jar | grep "$CLASS" | sed 's/$/;/'); let outputsize="$(echo $res|wc -c)"; [[ $outputsize > 1 ]] && { printf "\nMatch found in [$jar]\n"; printf "$res\n" | tr ';' '\n' | grep --color "$CLASS"; } done;}

#A# jps;Runs ~EMP~jps~NORM~ with custom highlighting
#Note: Replace '/Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/Contents/Home' with whatever the default is on the target system
function jps() { [[ -z ${JAVA_HOME} ]] && JAVA_HOME="/Library/Java/JavaVirtualMachines/jdk1.7.0_40.jdk/Contents/Home"; ${JAVA_HOME}/bin/jps -mlv | grep -v sun.tools.jps.Jps | awk 'BEGIN {print ""} { first=$1; $1=""; printf "\033[31;1m %s \033[32m ", first; for(i = 1; i <= NF; i++) { if (index($i,"-D") == 1 ) printf "\033[32;1m %s \033[0m", $i; else if (index($i,"-X") == 1 ) printf "\033[33;1m %s \033[0m", $i; else if (index($i,"-") == 1 ) printf "\033[35;1m %s \033[0m", $i; else printf "\033[36;1m %s \033[0m", $i; } print "";} END {print ""}'; }
